# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is the ev-aluator project - an evaluation tool thet evaluates the feasibility of using an electric vehicle with a specific range based on previous location history.

3. **Tech Stack** 
- Backend: C#, .Net Core 9.0
- Frontend: VueJS 3.0, vite, Javascript
4. **Development Workflow**
- TDD: Red → Green → Refactor (always)
- Functional style coding
    - Immutable updates only
    - Pure functions
    - Array methods over loops
    - Max 2 nesting levels
    - Early returns
    - Functional error handling with Option/Result types
- Domain Driven Design concept
- Hexagonal architecture
5. **Refactoring Checklist:**
- Eliminate duplicate knowledge (not just similar code)
- Safe refactoring: commit working → refactor → test → commit
- Abstract only when same business concept
6. **Commits:**
- feat: add payment validation
- fix: correct date formatting
- test: add edge cases
- Each commit = complete change with tests
- Small, working increments
7. **Development Guidance**
- Try to separate functions and methods into functional blocks like action, calculation or data
- Try to avoid actions as much as possible
- Project uses TreatWarningsAsErrors - all warnings must be resolved
- Nullable reference types enabled - null safety enforced
- CORS configured for cross-origin requests
- Swagger/OpenAPI enabled in development environment
- FastEndpoints used alongside traditional MVC controllers
- Clean Architecture: Clear separation between service layer, domain models, and API controllers
- Consistent API Design: All endpoints follow the same parameter structure and error handling patterns
- use hateoas links in the API responses where it makes sense
- when planning is requested, create the plan under the plans folder in the root directory in markdown format using a sequential number as a prefix like ###_{plan_name}.md. The ### should be the next available number based on the existing plans in the folder. {plan_name} should be generated by you.
8. **Configuration**
- Environment variables loaded via dotenv.net
- External service URLs configurable via appsettings.json
- Video proxy authentication via configuration sections
- Claude settings configured in .claude/settings.local.json with git operation permissions

## Development Commands
### Build and Run
```
dotnet build                                    # Build the solution
dotnet run --project src/trackmy-basketball    # Run the web API
dotnet watch --project src/trackmy-basketball  # Run with hot reload
```

### Testing
```
dotnet test                                     # Run all tests
dotnet test --filter "ClassName"               # Run specific test class
dotnet test --filter "TestMethodName"          # Run specific test method
dotnet test --collect:"XPlat Code Coverage"    # Run tests with coverage
```

### Package Management
```
dotnet restore                                  # Restore NuGet packages
dotnet add package <PackageName>               # Add new package
```

